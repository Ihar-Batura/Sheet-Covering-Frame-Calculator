(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function i(t){const{tag:n="div",classes:e=[],id:a,text:s,parent:r}=t,o=document.createElement(n);return e.length>0&&o.classList.add(...e),a&&(o.id=a),s&&(o.textContent=s),r!=null&&r.append(o),o}function E(){const t=i({tag:"header",classes:["header"]}),n=i({tag:"div",classes:["wrapper","header-wrapper"],parent:t});return i({tag:"h1",classes:["logo","header-logo"],text:"Sheet Covering Frame Calculator",parent:n}),t}function I(t){const{classes:n=[],id:e,text:a,disabled:s,name:r,onClick:o,parent:p}=t,l=document.createElement("button");return n.length>0&&l.classList.add(...n),e&&(l.id=e),a&&(l.textContent=a),s&&l.setAttribute("disabled",`${s}`),r&&l.setAttribute("name",r),o&&(l.onclick=o),p!=null&&p.append(l),l}function R(){const t=i({tag:"select",classes:["select","material-selection"]});return h!==null&&h.filter(e=>e.type==="list").forEach(e=>{const a=i({tag:"option",classes:["option","material-option"]});a.setAttribute("value",`${e.name}`),a.textContent=`${e.name}`,t.append(a)}),t}function V(){const t=i({tag:"select",classes:["select","pipe-selection"]});return h!==null&&h.filter(e=>e.type==="pipe").forEach(e=>{const a=i({tag:"option",classes:["option","pipe-option"]});a.setAttribute("value",`${e.name}`),a.textContent=`${e.name}`,t.append(a)}),t}function $(t){const{type:n,classes:e=[],id:a,value:s,title:r,required:o,placeholder:p,minLength:l,min:f,pattern:m,addRules:g,onInput:b,parent:y}=t,c=document.createElement("input");return c.setAttribute("type",n),e.length>0&&c.classList.add(...e),a&&(c.id=a),s&&(c.value=s),r&&c.setAttribute("title",r),o&&c.setAttribute("required",""),p&&c.setAttribute("placeholder",p),l&&c.setAttribute("minlength",l),f&&c.setAttribute("min",f),m&&c.setAttribute("pattern",m),g&&c.setAttribute("aria-describedby",g),b&&(c.oninput=b),y!=null&&y.append(c),c}function F(){const t=$({type:"number",classes:["input","input-width"],required:" ",placeholder:"width"});if(d!==null){const n=d.filter(e=>e.type==="size"&&e.key==="width");t.setAttribute("min",`${n[0].min}`),t.setAttribute("max",`${n[0].max}`)}return t}function q(){const t=$({type:"number",classes:["input","input-length"],required:" ",placeholder:"length"});if(d!==null){const n=d.filter(e=>e.type==="size"&&e.key==="length");t.setAttribute("min",`${n[0].min}`),t.setAttribute("max",`${n[0].max}`)}return t}function B(){const t=i({tag:"select",classes:["select","strength-selection"]});return d!==null&&d.filter(e=>e.type==="frame").forEach(e=>{const a=i({tag:"option",classes:["option","strength-option"]});a.setAttribute("value",`${e.name}`),a.textContent=`${e.name}`,t.append(a)}),t}function H({width:t,step:n,pipeWidth:e}){if(n&&e){const a=+t*1e3;let s=1;for(let r=e;r<a;r+=n*1e3+e)s+=1;return s}}function T({length:t,step:n,pipeWidth:e}){if(n&&e){const a=+t*1e3;let s=1;for(let r=e;r<a;r+=n*1e3+e)s+=1;return s}}function j({width:t,length:n,stepWidth:e,stepLength:a,pipeWidth:s}){return(t*1e3*e+n*1e3*a-a*s)/1e3}function k(t,n){return t*n}function N(t){return t*1}function W(t,n){let e=0;for(let a=0;a<t;a+=n)e+=1;return e}function z(t){if(d===null)throw new Error("configData is not find");return d.filter(e=>e.type==="fix"&&e.key===t)[0].value}function K(){const t=document.querySelector(".result-container");if(t!==null)for(;t.firstChild;)t.removeChild(t.firstChild)}function _(){const t=i({tag:"thead",classes:["table-head"]}),n=i({tag:"tr",classes:["table-head-row","table-row"],parent:t});return i({tag:"th",classes:["table-head-header"],text:"Наименование:",parent:n}),i({tag:"th",classes:["table-head-header"],text:"Ед. измерения:",parent:n}),i({tag:"th",classes:["table-head-header"],text:"Кол-во:",parent:n}),i({tag:"th",classes:["table-head-header"],text:"Сумма:",parent:n}),t}function L({name:t,unit:n,value:e,sum:a}){const s=i({tag:"tr",classes:["table-body-row","table-row"]});return i({tag:"td",classes:["table-body-cell"],text:t,parent:s}),i({tag:"td",classes:["table-body-cell"],text:n,parent:s}),i({tag:"td",classes:["table-body-cell"],text:`${Math.ceil(e)}`,parent:s}),i({tag:"td",classes:["table-body-cell"],text:`${Math.ceil(a)}`,parent:s}),s}function G({area:t,material:n,pipe:e,finishPipeValue:a,pipeFinalPrice:s,listPrice:r,listsValue:o,valueOfScrew:p,fullScrewPrice:l}){K();const f=document.querySelector(".result-container"),m=i({tag:"p",classes:["result-container-title"],text:`Площадь изделия: ${t} м2`}),g=i({tag:"table",classes:["table"]}),b=_(),y=i({tag:"tbody",classes:["table-body"]}),c=L({name:n,unit:"м2",value:o,sum:r}),v=L({name:e,unit:"мп",value:a,sum:s}),A=L({name:"Саморезы",unit:"шт",value:p,sum:l});y.append(c,v,A),g.append(b,y);const w=Math.ceil(r)+Math.ceil(s)+Math.ceil(l),x=i({tag:"p",classes:["result-total"],text:`Итого: ${w}`});f.append(m,g,x)}function J({material:t,pipe:n,width:e,length:a,strength:s}){const r=k(+e,+a);if(h&&d){const o=h.filter(u=>u.type==="list"&&u.name===t)[0],p=o.width,l=N(+p),f=W(r,l),m=o.material,b=o.price*f,c=z(m)*r,v=h.filter(u=>u.type==="fix")[0].price,A=c*v,w=d.filter(u=>u.type==="frame"&&u.name===s)[0].step,x=h.filter(u=>u.type==="pipe"&&u.name===n)[0],C=x.width,O=x.price,S=H({width:e,step:w,pipeWidth:C}),P=T({length:a,step:w,pipeWidth:C});if(S&&P){const u=j({width:+e,length:+a,stepWidth:S,stepLength:P,pipeWidth:C}),M=O*u;G({area:r,material:t,pipe:n,finishPipeValue:u,pipeFinalPrice:M,listPrice:b,listsValue:f,valueOfScrew:c,fullScrewPrice:A})}}}function Q(){const t=i({tag:"form",classes:["input-container"]}),n=R(),e=V(),a=F(),s=q(),r=B(),o=I({classes:["btn","btn-result"],text:"Result"});return t.addEventListener("submit",function(p){p.preventDefault();const l=n.value,f=e.value,m=a.value,g=s.value,b=r.value;J({material:l,pipe:f,width:m,length:g,strength:b})}),t.append(n,e,a,s,r,o),t}function U(){const t=i({tag:"main",classes:["main"]}),n=i({tag:"div",classes:["wrapper","main-wrapper"],parent:t}),e=Q(),a=i({tag:"div",classes:["result-container"]});return n.append(e,a),t}function X(){const t=i({tag:"footer",classes:["footer"]}),n=i({tag:"div",classes:["wrapper","footer-wrapper"],parent:t});i({tag:"p",classes:["footer-date"],text:"© 2025",parent:n});const e=i({tag:"a",classes:["footer-link"],text:"Ihar Batura",parent:n});return e.setAttribute("href","https://github.com/Ihar-Batura"),e.setAttribute("target","_blank"),t}async function D(t){return await(await fetch(t)).json()}let h=null,d=null;const Y="data/data.json",Z="data/config.json";async function tt(){h=await D(Y),d=await D(Z);const t=document.body,n=E(),e=U(),a=X();t.append(n,e,a)}tt();
